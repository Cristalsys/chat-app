(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{134:function(e,t,s){},135:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),r=s(72),c=s.n(r),i=s(5),o=s(12),l=s(9),d=Object(a.createContext)(),j=s(15),u=s(13),b=s(14),O=s.n(b),h=s(22),m=Object(a.createContext)(),f=s(6),g=s.n(f),_=s(0),p=Object(l.g)((function(e){var t=e.users,s=e.history,n=e.onlineUsers,r=Object(a.useContext)(d),c=Object(a.useContext)(m),i=function(){var e=Object(h.a)(O.a.mark((function e(t){var a,n,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=[t,r._id].sort().join(""),n=!1,c.conversations&&c.conversations.filter((function(e){e.members.sort().join("")===a&&(n=!0)})),n?s.push("/user/".concat(t)):(i={sender:r._id,receiver:t},c.addConversation(i,s))}catch(o){console.log(o)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)(_.Fragment,{children:t&&t.length>0?Object(_.jsx)("div",{className:g.a.usersList,children:t.filter((function(e){return e._id!==r._id})).map((function(e,s){return Object(_.jsxs)(a.Fragment,{children:[Object(_.jsxs)("div",{className:g.a.userListLink,onClick:function(){return i(e._id)},children:[Object(_.jsxs)("div",{className:g.a.userListContent,children:[Object(_.jsx)("img",{src:e.avatar,alt:"",className:g.a.userListContentImg}),Object(_.jsxs)("div",{className:g.a.userListDetails,children:[Object(_.jsx)("div",{className:g.a.userListDetailsFirstChild,children:e.firstName+" "+e.lastName}),Object(_.jsx)("div",{className:g.a.userListDetailsLastChild,children:"click here to chat"})]})]}),Object(_.jsx)("div",{className:n&&n.includes(e._id)?g.a.faOnline:g.a.faOffline,children:Object(_.jsx)(j.a,{icon:u.b})})]}),s!==t.filter((function(e){return e._id!==r._id})).length-1&&Object(_.jsx)("div",{className:g.a.borderLine})]},e._id)}))}):Object(_.jsx)("div",{children:"no users"})})})),x=Object(l.g)((function(e){var t=e.history,s=e.socket,n=e.onlineUsers,r=Object(a.useState)(""),c=Object(i.a)(r,2),l=c[0],b=c[1],O=Object(a.useContext)(d),h=Object(a.useContext)(m);Object(a.useEffect)((function(){O._id&&h.getConversations(O._id)}),[O._id]);var f=l?O.users.filter((function(e){return e._id!==O._id})).filter((function(e){return e.firstName.toLowerCase().includes(l.toLowerCase())||e.lastName.toLowerCase().includes(l.toLowerCase())})):O.users;return Object(_.jsx)("div",{children:O.loadingUser||O.loadingUsers?Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"lds-ripple",children:[Object(_.jsx)("div",{}),Object(_.jsx)("div",{})]})}):O.authenticated?Object(_.jsxs)("div",{className:g.a.wrapper,children:[Object(_.jsxs)("div",{className:g.a.header,children:[Object(_.jsxs)("div",{className:g.a.content,children:[Object(_.jsx)("img",{src:O.avatar,className:g.a.contentImg,alt:""}),Object(_.jsxs)("div",{className:g.a.details,children:[Object(_.jsx)("div",{className:g.a.userListDetailsFirstChild,children:O.firstName+" "+O.lastName}),Object(_.jsx)("div",{className:g.a.userListDetailsLastChild,children:"active now"})]})]}),Object(_.jsx)("div",{className:g.a.logout,onClick:function(e){s.emit("logout",O._id),e.preventDefault(),O.logoutUser(t)},children:Object(_.jsx)(o.b,{to:"/",children:Object(_.jsx)("span",{children:"logout"})})})]}),Object(_.jsxs)("div",{className:g.a.search,children:[Object(_.jsx)("input",{autoFocus:!0,type:"text",placeholder:"Search...",value:l,onChange:function(e){b(e.target.value)}}),Object(_.jsx)("div",{className:g.a.faSearch,children:Object(_.jsx)(j.a,{icon:u.f})})]}),Object(_.jsx)("div",{children:Object(_.jsx)(p,{users:f,socket:s,onlineUsers:n})})]}):Object(_.jsx)("div",{children:t.push("/login")})})})),v=s(28),N=s(2),w=s(4),y=s.n(w),E=Object(l.g)((function(e){var t=Object(a.useContext)(d),s=Object(a.useState)(""),n=Object(i.a)(s,2),r=n[0],c=n[1],l=Object(a.useState)(""),b=Object(i.a)(l,2),m=b[0],f=b[1],g=Object(a.useState)({firstName:"",lastName:"",email:"",password:"",showPassword:!1}),p=Object(i.a)(g,2),x=p[0],w=p[1];Object(a.useEffect)((function(){t.cleanErrors()}),[]);var E=function(e){w(Object(N.a)(Object(N.a)({},x),{},Object(v.a)({},e.target.name,e.target.value)))},k=function(){var s=Object(h.a)(O.a.mark((function s(a){var n;return O.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a.preventDefault(),n={firstName:x.firstName,lastName:x.lastName,email:x.email,password:x.password,avatar:m},t.register(n,e.history,e.setupSocket);case 3:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return Object(_.jsx)("div",{className:y.a.container,children:Object(_.jsxs)("div",{className:y.a.form,children:[Object(_.jsx)("div",{children:Object(_.jsx)("h1",{className:y.a.title,children:"Sign up"})}),Object(_.jsxs)("form",{className:y.a.formWrapper,children:[Object(_.jsxs)("div",{className:y.a.border,children:[Object(_.jsxs)("div",{className:y.a.field,children:[Object(_.jsx)("label",{className:y.a.label,children:"First Name"}),Object(_.jsx)("input",{className:y.a.input,type:"text",name:"firstName",value:x.firstName,onChange:E})]}),Object(_.jsxs)("div",{className:y.a.field,children:[Object(_.jsx)("label",{className:y.a.label,children:"Last Name"}),Object(_.jsx)("input",{className:y.a.input,type:"text",name:"lastName",value:x.lastName,onChange:E})]}),Object(_.jsxs)("div",{className:y.a.field,children:[Object(_.jsx)("label",{className:y.a.label,children:"Email"}),Object(_.jsx)("input",{className:y.a.input,type:"email",name:"email",value:x.email,onChange:E})]}),Object(_.jsxs)("div",{className:y.a.field,children:[Object(_.jsx)("label",{className:y.a.label,children:"Password"}),Object(_.jsxs)("div",{className:y.a.fieldPass,children:[Object(_.jsx)("input",{className:y.a.input,type:x.showPassword?"text":"password",name:"password",value:x.password,onChange:E}),Object(_.jsx)("div",{className:y.a.fieldPassItem,onClick:function(){w(Object(N.a)(Object(N.a)({},x),{},{showPassword:!x.showPassword}))},children:x.showPassword?Object(_.jsx)(j.a,{icon:u.c}):Object(_.jsx)(j.a,{icon:u.d})})]})]}),Object(_.jsxs)("div",{className:y.a.registerImage,children:[Object(_.jsx)("label",{className:y.a.registerImageLabel,children:"Select image "}),Object(_.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];if(c(e.target.value),t){var s=new FileReader;s.readAsDataURL(t),s.onloadend=function(){var e={avatar:s.result};f(e.avatar)}}},value:r})]}),t.errors&&Object(_.jsx)("div",{className:y.a.errors,children:Object(_.jsx)("span",{children:t.errors})})]}),Object(_.jsx)("div",{className:y.a.field,children:Object(_.jsx)("button",{className:y.a.submit,onClick:k,disabled:t.loading,children:"Sign up"})}),Object(_.jsx)("div",{className:y.a.link,children:Object(_.jsxs)("div",{className:y.a.linkText,children:["already have an account? sign in",Object(_.jsx)("span",{children:Object(_.jsx)(o.b,{to:"/login",children:" here"})})]})})]})]})})})),k=s(7),P=s.n(k),C=s(74),S=s.n(C),L=Object(l.g)((function(e){var t=Object(a.useContext)(d),s=Object(a.useState)({email:"",password:"",showPassword:!1}),n=Object(i.a)(s,2),r=n[0],c=n[1];Object(a.useEffect)((function(){t.cleanErrors()}),[]);var l=function(e){c(Object(N.a)(Object(N.a)({},r),{},Object(v.a)({},e.target.name,e.target.value)))},b=function(){var s=Object(h.a)(O.a.mark((function s(a){var n;return O.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a.preventDefault(),n={email:r.email,password:r.password},t.login(n,e.history,e.setupSocket);case 3:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),m=function(){var s=Object(h.a)(O.a.mark((function s(a){return O.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t.loginGoogle(a,e.history,e.setupSocket);case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return Object(_.jsx)("div",{className:P.a.container,children:Object(_.jsxs)("div",{className:P.a.form,children:[Object(_.jsx)("div",{children:Object(_.jsx)("h1",{className:P.a.title,children:"Sign in"})}),Object(_.jsxs)("form",{className:P.a.formWrapper,children:[Object(_.jsxs)("div",{className:P.a.border,children:[Object(_.jsxs)("div",{className:P.a.field,children:[Object(_.jsx)("label",{className:P.a.label,children:"Email"}),Object(_.jsx)("input",{className:P.a.input,type:"email",name:"email",value:r.email,onChange:l})]}),Object(_.jsxs)("div",{className:P.a.field,children:[Object(_.jsx)("label",{className:P.a.label,children:"Password"}),Object(_.jsxs)("div",{className:P.a.fieldPass,children:[Object(_.jsx)("input",{className:P.a.input,type:r.showPassword?"text":"password",name:"password",value:r.password,onChange:l}),Object(_.jsx)("div",{className:P.a.fieldPassItem,onClick:function(){c(Object(N.a)(Object(N.a)({},r),{},{showPassword:!r.showPassword}))},children:r.showPassword?Object(_.jsx)(j.a,{icon:u.c}):Object(_.jsx)(j.a,{icon:u.d})})]})]}),Object(_.jsx)("div",{className:P.a.linkForgot,children:Object(_.jsx)("div",{className:P.a.linkTextForgot,children:Object(_.jsx)("span",{children:Object(_.jsx)(o.b,{to:"/forgotPassword",children:"forgot password?"})})})}),t.errors&&Object(_.jsx)("div",{className:P.a.errors,children:Object(_.jsx)("span",{children:t.errors})})]}),Object(_.jsx)("div",{className:P.a.field,children:Object(_.jsx)("button",{className:P.a.submit,onClick:b,disabled:t.loading,children:"Sign in"})}),Object(_.jsx)("div",{className:P.a.googleButton,children:Object(_.jsx)(S.a,{clientId:"333550360272-m38ff1ba54kec3jfn8gb7aliuf47k3uh.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:m,onFailure:function(){console.log("login Google failed")},cookiePolicy:"single_host_origin"})}),Object(_.jsx)("div",{className:P.a.link,children:Object(_.jsxs)("div",{className:P.a.linkText,children:["don't have an account? sign up ",Object(_.jsx)("span",{children:Object(_.jsx)(o.b,{to:"/register",children:" here"})})]})})]})]})})})),U=s(31),R=s(20),I=s.n(R),T=function(e){var t=e.message,s=e.own,a=e.newUser;return Object(_.jsx)(_.Fragment,{children:s?Object(_.jsx)("div",{className:I.a.chat+" "+I.a.outgoing,children:Object(_.jsx)("div",{className:I.a.chatDetails,children:Object(_.jsx)("p",{children:t.text})})}):Object(_.jsxs)("div",{className:I.a.chat+" "+I.a.incoming,children:[Object(_.jsx)("img",{src:a.avatar,alt:""}),Object(_.jsx)("div",{className:I.a.chatDetails,children:Object(_.jsx)("p",{children:t.text})})]})})},D=Object(l.g)((function(e){var t=Object(a.useContext)(d),s=Object(a.useContext)(m),n=Object(a.useRef)(),r=Object(a.useState)(""),c=Object(i.a)(r,2),o=c[0],l=c[1],b=Object(a.useState)([]),O=Object(i.a)(b,2),h=O[0],f=O[1],g=Object(a.useState)(null),p=Object(i.a)(g,2),x=p[0],v=p[1];Object(a.useEffect)((function(){e.socket&&e.socket.on("getMessage",(function(e){v({conversation:s.conversation._id,sender:e.senderId,text:e.text})}))}),[]),Object(a.useEffect)((function(){x&&s.conversation.members.includes(x.sender)&&f((function(e){return[].concat(Object(U.a)(e),[x])}))}),[x]),Object(a.useEffect)((function(){if(!t.loadingUser){var a=e.match.params.userId;t.getNewUser(a);var n={sender:t._id,receiver:a};s.getOneConversation(n)}}),[t.loadingUser]),Object(a.useEffect)((function(){return h.length?f(h):f(s.messages),function(){f([])}}),[s.messages]),Object(a.useEffect)((function(){s.conversation._id&&s.getMessages(s.conversation._id)}),[s.conversation._id]);Object(a.useEffect)((function(){var e;null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[h]);return Object(_.jsx)("div",{children:t.loadingUser||t.loadingNewUser||!t.newUser?Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"lds-ripple",children:[Object(_.jsx)("div",{}),Object(_.jsx)("div",{})]})}):t.authenticated?Object(_.jsxs)("div",{className:I.a.chatWrapper,children:[Object(_.jsxs)("div",{className:I.a.chatHeader,children:[Object(_.jsx)("div",{onClick:function(a){a.preventDefault(),e.history.push("/"),t.emptyNewUser(),s.setEmptyConvMess()},children:Object(_.jsx)(j.a,{icon:u.a})}),Object(_.jsx)("img",{src:t.newUser.avatar,alt:""}),Object(_.jsxs)("div",{className:I.a.chatTitle,children:[Object(_.jsx)("div",{children:t.newUser.firstName+" "+t.newUser.lastName}),e.onlineUsers&&e.onlineUsers.includes(e.match.params.userId)?Object(_.jsx)("div",{children:"active now"}):Object(_.jsx)("div",{children:"offline now"})]})]}),Object(_.jsx)("div",{className:I.a.chatBox,children:h&&h.length>0&&h.map((function(e,s){return Object(_.jsx)("div",{ref:n,children:Object(_.jsx)(T,{message:e,own:e.sender===t._id,newUser:t.newUser})},s)}))}),Object(_.jsxs)("form",{action:"",className:I.a.chatForm,children:[Object(_.jsx)("input",{type:"text",placeholder:"write...",value:o,onChange:function(e){l(e.target.value)}}),Object(_.jsx)("button",{onClick:function(a){if(a.preventDefault(),o){var n={conversation:s.conversation._id,sender:t._id,text:o};e.socket.emit("sendMessage",{senderId:t._id,receiverId:e.match.params.userId,text:o,conversation:s.conversation._id}),s.addMessage(n),f([].concat(Object(U.a)(h),[n])),l("")}},children:Object(_.jsx)(j.a,{icon:u.e})})]})]}):Object(_.jsx)("div",{children:e.history.push("/login")})})})),A=s(16),F=s.n(A),G=Object(l.g)((function(e){var t=Object(a.useContext)(d),s=Object(a.useState)({email:""}),n=Object(i.a)(s,2),r=n[0],c=n[1];Object(a.useEffect)((function(){t.cleanErrors()}),[]);var l=function(){var s=Object(h.a)(O.a.mark((function s(a){var n;return O.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a.preventDefault(),n={email:r.email},t.forgotPassword(n,e.history);case 3:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return Object(_.jsx)("div",{className:F.a.container,children:Object(_.jsxs)("div",{className:F.a.form,children:[Object(_.jsx)("div",{children:Object(_.jsx)("h1",{className:F.a.title,children:"Reset Password"})}),Object(_.jsxs)("form",{className:F.a.formWrapper,children:[Object(_.jsxs)("div",{className:F.a.border,children:[Object(_.jsxs)("div",{className:F.a.field,children:[Object(_.jsx)("label",{className:F.a.label,children:"Email"}),Object(_.jsx)("input",{className:F.a.input,type:"email",name:"email",value:r.email,onChange:function(e){c(Object(N.a)(Object(N.a)({},r),{},Object(v.a)({},e.target.name,e.target.value)))}})]}),t.errors&&Object(_.jsx)("div",{className:F.a.errors,children:Object(_.jsx)("span",{children:t.errors})})]}),Object(_.jsx)("div",{className:F.a.field,children:Object(_.jsx)("button",{className:F.a.submit,onClick:l,disabled:t.loading,children:"Submit"})}),Object(_.jsx)("div",{className:F.a.link,children:Object(_.jsxs)("div",{className:F.a.linkText,children:["back to login page ",Object(_.jsx)("span",{children:Object(_.jsx)(o.b,{to:"/login",children:" here"})})]})})]})]})})})),W=s(8),B=s.n(W),M=Object(l.g)((function(e){var t=Object(a.useContext)(d),s=Object(a.useState)({password:"",showPassword:!1}),n=Object(i.a)(s,2),r=n[0],c=n[1];Object(a.useEffect)((function(){t.cleanErrors(),t.resetPassword(e.match.params.token)}),[]);var l=function(){var s=Object(h.a)(O.a.mark((function s(a){var n;return O.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a.preventDefault(),n={password:r.password,email:t.resetEmail},t.updatePasswordViaEmail(n,e.history);case 3:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return Object(_.jsx)(_.Fragment,{children:t.errorsReset?Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:B.a.container,children:Object(_.jsxs)("div",{className:B.a.form,children:[Object(_.jsx)("div",{children:Object(_.jsx)("h2",{className:B.a.title,children:"Problem resetting password. Please send another reset link."})}),Object(_.jsx)("div",{className:B.a.field,children:Object(_.jsx)(o.b,{className:B.a.submitLink,to:"/",children:Object(_.jsx)("div",{children:"Go home"})})}),Object(_.jsx)("div",{className:B.a.field,children:Object(_.jsx)(o.b,{className:B.a.submitLink,to:"/forgotPassword",children:Object(_.jsx)("div",{children:"Forgot Password"})})})]})})}):Object(_.jsx)("div",{className:B.a.container,children:Object(_.jsxs)("div",{className:B.a.form,children:[Object(_.jsx)("div",{children:Object(_.jsx)("h1",{className:B.a.title,children:"Change Password"})}),Object(_.jsxs)("form",{className:B.a.formWrapper,children:[Object(_.jsxs)("div",{className:B.a.field,children:[Object(_.jsx)("label",{className:B.a.label,children:"New password"}),Object(_.jsxs)("div",{className:B.a.fieldPass,children:[Object(_.jsx)("input",{className:B.a.input,type:r.showPassword?"text":"password",name:"password",value:r.password,onChange:function(e){c(Object(N.a)(Object(N.a)({},r),{},Object(v.a)({},e.target.name,e.target.value)))}}),Object(_.jsx)("div",{className:B.a.fieldPassItem,onClick:function(){c(Object(N.a)(Object(N.a)({},r),{},{showPassword:!r.showPassword}))},children:r.showPassword?Object(_.jsx)(j.a,{icon:u.c}):Object(_.jsx)(j.a,{icon:u.d})})]})]}),t.errors&&Object(_.jsx)("div",{className:B.a.errors,children:Object(_.jsx)("span",{children:t.errors})}),Object(_.jsx)("div",{className:B.a.field,children:Object(_.jsx)("button",{className:B.a.submit,onClick:l,disabled:t.loading,children:"Submit"})}),Object(_.jsx)("div",{className:B.a.link,children:Object(_.jsxs)("div",{className:B.a.linkText,children:["back to login page ",Object(_.jsx)("span",{children:Object(_.jsx)(o.b,{to:"/login",children:" here"})})]})})]})]})})})})),V=s(10),z=s.n(V),H=s(75),J=localStorage.FBIdToken;var Y=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),s=t[0],n=t[1],r=Object(a.useState)([]),c=Object(i.a)(r,2),j=c[0],u=c[1],b=Object(a.useState)(!1),O=Object(i.a)(b,2),h=O[0],m=O[1],f=Object(a.useContext)(d),g=function(){if(localStorage.getItem("FBIdToken")&&!s){var e=Object(H.io)("http://localhost:5000",{query:{token:localStorage.getItem("FBIdToken")}});e.on("connect",(function(){console.log("Socket connected "+e.id)})),n(e)}};Object(a.useEffect)((function(){J&&(f.setAuthenticated(),z.a.defaults.headers.common.Authorization=J,f.getUserData(),g()),m(!0)}),[J]),Object(a.useEffect)((function(){f&&f._id&&(s.emit("addUser",f._id),s.on("getUsers",(function(e){u(e)})))}),[f,f._id]);var p=function(e){var t=e.isAuthenticated,s=e.setupSocket,a=e.socket,n=e.onlineUsers;return t?Object(_.jsxs)(l.d,{children:[Object(_.jsx)(l.b,{path:"/",render:function(){return Object(_.jsx)(x,{socket:a,onlineUsers:n})},exact:!0}),Object(_.jsx)(l.b,{path:"/user/:userId",render:function(){return Object(_.jsx)(D,{socket:a,onlineUsers:n})},exact:!0}),Object(_.jsx)(l.a,{to:"/"})]}):Object(_.jsxs)(l.d,{children:[Object(_.jsx)(l.b,{path:"/register",render:function(){return Object(_.jsx)(E,{setupSocket:s})},exact:!0}),Object(_.jsx)(l.b,{path:"/login",render:function(){return Object(_.jsx)(L,{setupSocket:s})},exact:!0}),Object(_.jsx)(l.b,{path:"/forgotPassword",render:function(){return Object(_.jsx)(G,{})},exact:!0}),Object(_.jsx)(l.b,{path:"/reset/:token",render:function(){return Object(_.jsx)(M,{})},exact:!0}),Object(_.jsx)(l.a,{to:"/login"})]})}({isAuthenticated:f.authenticated,setupSocket:g,socket:s,onlineUsers:j});return Object(_.jsx)(o.a,{children:Object(_.jsx)("div",{className:"App",children:h&&p})})},q=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,136)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))},Q=(s(134),"SET_AUTHENTICATED"),K="SET_UNAUTHENTICATED",Z="SET_USER",X="SET_USERS",$="SET_NEW_USER",ee="LOADING",te="UNLOADING",se="LOADING_USER",ae="LOADING_USERS",ne="LOADING_NEW_USER",re="SET_ERRORS",ce="CLEAR_ERRORS",ie="SET_NEW_USER_EMPTY",oe="SET_ERRORS_RESET",le="CLEAR_ERRORS_RESET",de="LOADING_RESET",je="UNLOADING_RESET",ue="RESET_EMAIL",be="UPDATE_PASSWORD";function Oe(){}var he={authenticated:!1,_id:"",firstName:"",lastName:"",email:"",avatar:"",loadingUser:!1,loadingUsers:!1,loadingNewUser:!1,loadingReset:!1,errors:null,errorsReset:null,users:[],newUser:{},resetEmail:"",password:"",login:Oe,logout:Oe},me=function(e,t){switch(t.type){case Q:return Object(N.a)(Object(N.a)({},e),{},{authenticated:!0});case K:return he;case ee:return Object(N.a)(Object(N.a)({},e),{},{loading:!0});case te:return Object(N.a)(Object(N.a)({},e),{},{loading:!1});case se:return Object(N.a)(Object(N.a)({},e),{},{loadingUser:!0});case ae:return Object(N.a)(Object(N.a)({},e),{},{loadingUsers:!0});case ne:return Object(N.a)(Object(N.a)({},e),{},{loadingNewUser:!0});case re:return Object(N.a)(Object(N.a)({},e),{},{loading:!1,errors:t.payload});case ce:return Object(N.a)(Object(N.a)({},e),{},{loading:!1,errors:[]});case Z:return Object(N.a)({authenticated:!0,loadingUser:!1},t.payload);case X:return Object(N.a)(Object(N.a)({},e),{},{users:t.payload,loadingUsers:!1});case $:return Object(N.a)(Object(N.a)({},e),{},{newUser:t.payload,loadingNewUser:!1});case ie:return Object(N.a)(Object(N.a)({},e),{},{newUser:{}});case oe:return Object(N.a)(Object(N.a)({},e),{},{loading:!1,errorsReset:t.payload});case le:return Object(N.a)(Object(N.a)({},e),{},{loading:!1,errorsReset:[]});case de:return Object(N.a)(Object(N.a)({},e),{},{loadingReset:!0});case je:return Object(N.a)(Object(N.a)({},e),{},{loadingReset:!1});case ue:return Object(N.a)(Object(N.a)({},e),{},{resetEmail:t.payload});case be:return Object(N.a)(Object(N.a)({},e),{},{password:t.payload});default:return e}},fe=function(e){var t=Object(a.useReducer)(me,he),s=Object(i.a)(t,2),n=s[0],r=s[1],c=function(){r({type:se}),z.a.get("/user/me").then((function(e){r({type:Z,payload:e.data}),o()})).catch((function(e){return console.log(e)}))},o=function(){r({type:ae}),z.a.get("/user/").then((function(e){r({type:X,payload:e.data})})).catch((function(){r({type:X,payload:[]})}))},l=function(e){var t="Bearer ".concat(e);localStorage.setItem("FBIdToken",t),z.a.defaults.headers.common.Authorization=t};return Object(_.jsx)(d.Provider,{value:{loading:n.loading,loadingUser:n.loadingUser,loadingUsers:n.loadingUsers,loadingNewUser:n.loadingNewUser,authenticated:n.authenticated,errors:n.errors,_id:n._id,firstName:n.firstName,lastName:n.lastName,email:n.email,avatar:n.avatar,users:n.users,newUser:n.newUser,errorsReset:n.errorsReset,loadingReset:n.loadingReset,resetEmail:n.resetEmail,login:function(e,t,s){r({type:ee}),z.a.post("/auth/signin",e).then((function(e){l(e.data.token),c(),r({type:ce}),r({type:te}),t.push("/"),s()})).catch((function(e){console.log("Errors",e.response.data.message),r({type:re,payload:e.response.data.message})}))},register:function(e,t,s){r({type:ee}),z.a.post("/auth/signup",e).then((function(e){l(e.data.token),c(),r({type:ce}),r({type:te}),t.push("/"),s()})).catch((function(e){console.log("Errors",e.response.data.message),r({type:re,payload:e.response.data.message})}))},logoutUser:function(e){localStorage.removeItem("FBIdToken"),delete z.a.defaults.headers.common.Authorization,r({type:K}),e.push("/login")},getUserData:c,getNewUser:function(e){r({type:ne}),z.a.get("/user/".concat(e)).then((function(e){r({type:$,payload:e.data})})).catch((function(e){return console.log(e)}))},setAuthenticated:function(){r({type:Q})},cleanErrors:function(){r({type:ce})},emptyNewUser:function(){r({type:ie})},loginGoogle:function(e,t,s){r({type:ee}),z.a.post("/auth/googleLogin",{token:e.tokenId}).then((function(e){l(e.data.token),c(),r({type:ce}),r({type:te}),t.push("/"),s()})).catch((function(e){console.log("Errors",e.response.data.message),r({type:re,payload:e.response.data.message})}))},forgotPassword:function(e,t){r({type:ee}),z.a.post("/auth/forgotPassword",e).then((function(e){console.log("res ",e),r({type:ce}),r({type:te}),t.push("/login")})).catch((function(e){console.log("Errors: ",e.response.data.message),r({type:re,payload:e.response.data.message})}))},resetPassword:function(e){r({type:de}),z.a.get("/auth/reset/"+e).then((function(e){r({type:ue,payload:e.data.email}),r({type:oe}),r({type:je})})).catch((function(e){console.log("Errors: ",e.response.data.message),r({type:le,payload:e.response.data.message})}))},updatePasswordViaEmail:function(e,t){r({type:ee}),console.log("userData",e),z.a.post("/auth/updatePasswordViaEmail",e).then((function(e){r({type:be,payload:e.data.password}),r({type:ce}),r({type:te}),t.push("/login")})).catch((function(e){console.log("Errors: ",e.response.data.message),r({type:re,payload:e.response.data.message})}))}},children:e.children})},ge="ADD_CONVERSATION",_e="SET_CONVERSATIONS",pe="SET_CONVERSATION",xe="SET_MESSAGES",ve="ADD_MESSAGE",Ne="CONVERSATIONS_LOADING",we="CONVERSATION_LOADING",ye="MESSAGES_LOADING",Ee="SET_EMPTY_CONV_MESS",ke={conversations:[],messages:[],conversation:{},conversationsLoading:!1,oneConversationLoading:!1,messageLoading:!1},Pe=function(e,t){switch(t.type){case Ne:return Object(N.a)(Object(N.a)({},e),{},{conversationsLoading:!0});case we:return Object(N.a)(Object(N.a)({},e),{},{oneConversationLoading:!0});case ye:return Object(N.a)(Object(N.a)({},e),{},{messageLoading:!0});case _e:return Object(N.a)(Object(N.a)({},e),{},{conversations:t.payload,conversationsLoading:!1});case pe:return Object(N.a)(Object(N.a)({},e),{},{conversation:t.payload,oneConversationLoading:!1});case ge:return Object(N.a)(Object(N.a)({},e),{},{conversations:[].concat(Object(U.a)(e.conversations),[t.payload])});case xe:return Object(N.a)(Object(N.a)({},e),{},{messages:t.payload,messageLoading:!1});case ve:return Object(N.a)(Object(N.a)({},e),{},{messages:[].concat(Object(U.a)(e.messages),[t.payload])});case Ee:return Object(N.a)(Object(N.a)({},e),{},{messages:[],conversation:{}});default:return e}},Ce=function(e){var t=Object(a.useReducer)(Pe,ke),s=Object(i.a)(t,2),n=s[0],r=s[1];return Object(_.jsx)(m.Provider,{value:{loadingConversation:n.loadingConversation,oneConversationLoading:n.oneConversationLoading,messageLoading:n.messageLoading,conversations:n.conversations,conversation:n.conversation,messages:n.messages,members:n.members,getConversations:function(e){r({type:Ne}),z.a.get("/conversation/".concat(e)).then((function(e){r({type:_e,payload:e.data})})).catch((function(e){console.log("Errors",e)}))},addConversation:function(e,t){z.a.post("/conversation/",e).then((function(s){r({type:ge,payload:s.data}),t.push("/user/".concat(e.receiver))})).catch((function(e){console.log("Errors",e)}))},getOneConversation:function(e){r({type:we}),z.a.get("/conversation/find/".concat(e.sender,"/").concat(e.receiver)).then((function(e){r({type:pe,payload:e.data})})).catch((function(e){console.log("Errors",e)}))},getMessages:function(e){r({type:ye}),z.a.get("/message/".concat(e)).then((function(e){r({type:xe,payload:e.data})})).catch((function(e){console.log("Errors",e)}))},addMessage:function(e){z.a.post("/message/",e).then((function(e){r({type:ve,payload:e.data})})).catch((function(e){console.log("Errors",e)}))},setEmptyConvMess:function(){r({type:Ee})}},children:e.children})};c.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(fe,{children:Object(_.jsx)(Ce,{children:Object(_.jsx)(Y,{})})})}),document.getElementById("root")),q()},16:function(e,t,s){e.exports={container:"forgotPassword_container__3-zC3",form:"forgotPassword_form__1Lc_l",formWrapper:"forgotPassword_formWrapper__mofdd",title:"forgotPassword_title__31Bqn",field:"forgotPassword_field__1vRz_",label:"forgotPassword_label__3eKyO",input:"forgotPassword_input__1RWtR",border:"forgotPassword_border__246-j",submit:"forgotPassword_submit__1UaIq",link:"forgotPassword_link__XAc8j",linkText:"forgotPassword_linkText__2WGZ7",errors:"forgotPassword_errors__3i9qu"}},20:function(e,t,s){e.exports={chatWrapper:"chat_chatWrapper__1RrkO",chatHeader:"chat_chatHeader__3NHRf",chatTitle:"chat_chatTitle__2X61D",chatBox:"chat_chatBox__3HR1M",chat:"chat_chat__21uMP",outgoing:"chat_outgoing__VwGHl",chatDetails:"chat_chatDetails__1FGy9",incoming:"chat_incoming__ahPzm",chatForm:"chat_chatForm__19vND"}},4:function(e,t,s){e.exports={container:"register_container__eVdJh",form:"register_form__tuvRj",formWrapper:"register_formWrapper__2f8Mn",title:"register_title__2NKcd",field:"register_field__YdQzG",fieldPass:"register_fieldPass__24JJb",fieldPassItem:"register_fieldPassItem__J-JQQ",label:"register_label__lpk3j",input:"register_input__38IBZ",border:"register_border__3gCRx",submit:"register_submit__1UQpm",link:"register_link__39L9U",linkText:"register_linkText__38OK_",registerImage:"register_registerImage__kHEUU",registerImageLabel:"register_registerImageLabel__17iiK",errors:"register_errors__2PBGx"}},6:function(e,t,s){e.exports={wrapper:"home_wrapper__1JsC3",header:"home_header__OyjrH",usersList:"home_usersList__2-1FR",content:"home_content__k9-gc",contentImg:"home_contentImg__2DHL7",details:"home_details__11LEy",logout:"home_logout__3pYNT",search:"home_search__UuaeU",faSearch:"home_faSearch__GjRzl",userListLink:"home_userListLink__1-vH8",borderLine:"home_borderLine__3c0y7",userListContent:"home_userListContent__2JkVi",userListContentImg:"home_userListContentImg__10CVm",userListDetails:"home_userListDetails__1gksb",userListDetailsFirstChild:"home_userListDetailsFirstChild__1zJxZ",userListDetailsLastChild:"home_userListDetailsLastChild__2Cghd",faOnline:"home_faOnline__1u4-e",faOffline:"home_faOffline__3TNeO"}},7:function(e,t,s){e.exports={container:"login_container__3EB1h",form:"login_form__oRxVW",formWrapper:"login_formWrapper__39UY_",title:"login_title__3mCDu",field:"login_field__2P86z",fieldPass:"login_fieldPass__1xV8y",fieldPassItem:"login_fieldPassItem__39PRN",label:"login_label__2jDfq",input:"login_input__1Bxrc",border:"login_border__h2zN6",submit:"login_submit__2inWQ",link:"login_link__2X81W",linkText:"login_linkText__18TNy",errors:"login_errors__1o6Ri",googleButton:"login_googleButton__1lYOs",linkForgot:"login_linkForgot__1Iu_K",linkTextForgot:"login_linkTextForgot__1zaT3"}},8:function(e,t,s){e.exports={container:"resetPassword_container__3-3zw",form:"resetPassword_form__2GAVc",formWrapper:"resetPassword_formWrapper__2yNr8",title:"resetPassword_title__2vph0",field:"resetPassword_field__30QZy",fieldPass:"resetPassword_fieldPass__2-Ycf",fieldPassItem:"resetPassword_fieldPassItem__17JuB",label:"resetPassword_label__2ZRB7",input:"resetPassword_input__3RE0R",border:"resetPassword_border__1BqCD",submit:"resetPassword_submit__vAyx3",link:"resetPassword_link__3c56G",linkText:"resetPassword_linkText__17jvJ",errors:"resetPassword_errors__1yasx",submitLink:"resetPassword_submitLink__2vPzO"}}},[[135,1,2]]]);
//# sourceMappingURL=main.f28ea195.chunk.js.map
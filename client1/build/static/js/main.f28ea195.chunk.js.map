{"version":3,"sources":["context/User/UserContext.js","context/Conversation/ConversationContext.js","components/Users.js","pages/Home/Home.js","pages/Register/Register.js","pages/Login/Login.js","components/Message.js","pages/Chat/Chat.js","pages/ForgorPassword/ForgotPassword.js","pages/ResetPassword/ResetPassword.js","App.js","routes.js","reportWebVitals.js","context/User/UserTypes.js","context/User/UserReducer.js","context/User/UserProvider.js","context/Conversation/ConversationTypes.js","context/Conversation/ConversationReducer.js","context/Conversation/ConversationProvider.js","index.js","pages/ForgorPassword/forgotPassword.module.css","pages/Chat/chat.module.css","pages/Register/register.module.css","pages/Home/home.module.css","pages/Login/login.module.css","pages/ResetPassword/resetPassword.module.css"],"names":["UserContext","createContext","ConversationContext","withRouter","users","history","onlineUsers","auth","useContext","conv","onClickConversationHandler","userId","a","arr","_id","sort","join","isConversation","conversations","filter","members","push","sendData","sender","receiver","addConversation","e","console","log","length","className","styles","usersList","user","map","index","userListLink","onClick","userListContent","src","avatar","alt","userListContentImg","userListDetails","userListDetailsFirstChild","firstName","lastName","userListDetailsLastChild","includes","faOnline","faOffline","icon","faDotCircle","borderLine","socket","useState","search","setSearch","useEffect","getConversations","filteredData","item","toLowerCase","loadingUser","loadingUsers","authenticated","wrapper","header","content","contentImg","details","logout","event","emit","preventDefault","logoutUser","to","autoFocus","type","placeholder","value","onChange","target","faSearch","props","fileInputState","setFileInputState","userAvatar","setUserAvatar","email","password","showPassword","values","setValues","cleanErrors","handleChange","name","registerHandler","userData","register","setupSocket","container","form","title","formWrapper","border","field","label","input","fieldPass","fieldPassItem","faEye","faEyeSlash","registerImage","registerImageLabel","file","files","reader","FileReader","readAsDataURL","onloadend","newImage","result","errors","submit","disabled","loading","link","linkText","loginHandler","login","responseSuccessGoogle","response","loginGoogle","linkForgot","linkTextForgot","googleButton","clientId","buttonText","onSuccess","onFailure","cookiePolicy","Message","message","own","newUser","chat","outgoing","chatDetails","text","incoming","scrollRef","useRef","setText","messages","setMessages","arrivalMessage","setArrivalMessage","on","data","conversation","senderId","prev","match","params","getNewUser","getOneConversation","getMessages","current","scrollIntoView","behavior","loadingNewUser","chatWrapper","chatHeader","emptyNewUser","setEmptyConvMess","faArrowLeft","chatTitle","chatBox","mes","ref","action","chatForm","receiverId","addMessage","faReply","forgotPassword","resetPassword","token","changePassword","resetEmail","updatePasswordViaEmail","errorsReset","submitLink","localStorage","FBIdToken","App","setSocket","setOnlineUsers","setLoading","getItem","newSocket","io","query","id","setAuthenticated","axios","defaults","headers","common","getUserData","routes","isAuthenticated","path","render","exact","useRoutes","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","SET_AUTHENTICATED","SET_UNAUTHENTICATED","SET_USER","SET_USERS","SET_NEW_USER","LOADING","UNLOADING","LOADING_USER","LOADING_USERS","LOADING_NEW_USER","SET_ERRORS","CLEAR_ERRORS","SET_NEW_USER_EMPTY","SET_ERRORS_RESET","CLEAR_ERRORS_RESET","LOADING_RESET","UNLOADING_RESET","RESET_EMAIL","UPDATE_PASSWORD","noop","initialState","loadingReset","UserReducer","state","payload","UserProvider","useReducer","dispatch","get","res","getAllUsers","catch","err","setAuthorizationHeader","setItem","Provider","post","newUserData","removeItem","tokenId","children","ADD_CONVERSATION","SET_CONVERSATIONS","SET_CONVERSATION","SET_MESSAGES","ADD_MESSAGE","CONVERSATIONS_LOADING","CONVERSATION_LOADING","MESSAGES_LOADING","SET_EMPTY_CONV_MESS","conversationsLoading","oneConversationLoading","messageLoading","ConversationReducer","loadingConversation","conversationData","conversationId","messageData","ReactDOM","StrictMode","ConversationProvider","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.f28ea195.chunk.js","sourcesContent":["import {createContext} from \"react\";\r\n\r\nconst UserContext = createContext()\r\n\r\nexport default UserContext","import {createContext} from \"react\";\r\n\r\nconst ConversationContext = createContext()\r\n\r\nexport default ConversationContext","import React, {Fragment, useContext} from \"react\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faDotCircle} from '@fortawesome/free-solid-svg-icons'\r\nimport UserContext from \"../context/User/UserContext\";\r\nimport ConversationContext from \"../context/Conversation/ConversationContext\";\r\nimport styles from '../pages/Home/home.module.css'\r\n\r\nconst Users = ({users, history, onlineUsers}) => {\r\n\r\n\r\n    const auth = useContext(UserContext)\r\n    const conv = useContext(ConversationContext)\r\n\r\n\r\n    const onClickConversationHandler = async (userId) => {\r\n        try {\r\n\r\n            let arr = [userId, auth._id].sort().join('')\r\n            let isConversation = false\r\n            conv.conversations && conv.conversations.filter((conv) => {\r\n                const str = conv.members.sort().join('')\r\n                if (str === arr) {\r\n                    isConversation = true\r\n                }\r\n            })\r\n\r\n            // addConversation\r\n            if (!isConversation) {\r\n                const sendData = {\r\n                    sender: auth._id,\r\n                    receiver: userId\r\n                }\r\n                conv.addConversation(sendData, history)\r\n                // redirect conversation\r\n            } else {\r\n                history.push(`/user/${userId}`)\r\n            }\r\n\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            {users && users.length > 0 ? (\r\n                <div className={styles.usersList}>\r\n                    {users.filter(user => user._id !== auth._id).map((user, index) => (\r\n                        <Fragment key={user._id}>\r\n                            <div className={styles.userListLink} onClick={() =>\r\n                                onClickConversationHandler(user._id)}>\r\n                                <div className={styles.userListContent}>\r\n                                    <img src={user.avatar} alt=\"\" className={styles.userListContentImg}/>\r\n                                    <div className={styles.userListDetails}>\r\n                                        <div\r\n                                            className={styles.userListDetailsFirstChild}>{user.firstName + \" \" + user.lastName}</div>\r\n                                        <div className={styles.userListDetailsLastChild}>{'click here to chat'}</div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className={onlineUsers && onlineUsers.includes(user._id) ?\r\n                                    styles.faOnline : styles.faOffline}><FontAwesomeIcon icon={faDotCircle}/></div>\r\n                            </div>\r\n                            {index !== users.filter(user => user._id !== auth._id).length - 1 && (\r\n                                <div className={styles.borderLine}></div>\r\n                            )}\r\n                        </Fragment>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <div>\r\n                    no users\r\n                </div>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default withRouter(Users)\r\n","import React, {useContext, useEffect, useState} from \"react\";\r\nimport UserContext from \"../../context/User/UserContext\";\r\n// import './home.module.css'\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faSearch} from '@fortawesome/free-solid-svg-icons'\r\nimport Users from \"../../components/Users\";\r\nimport ConversationContext from \"../../context/Conversation/ConversationContext\";\r\nimport styles from './home.module.css'\r\n\r\nconst Home = ({history, socket, onlineUsers}) => {\r\n\r\n    const [search, setSearch] = useState('')\r\n\r\n    const auth = useContext(UserContext)\r\n    const conv = useContext(ConversationContext)\r\n\r\n\r\n    useEffect(() => {\r\n        if (auth._id) {\r\n            conv.getConversations(auth._id)\r\n        }\r\n    }, [auth._id])\r\n\r\n    const logoutHandler = (event) => {\r\n        socket.emit('logout', auth._id)\r\n        event.preventDefault()\r\n        auth.logoutUser(history)\r\n    }\r\n\r\n    const getFilteredData = () => {\r\n        if (!search) {\r\n            return auth.users\r\n        }\r\n        return auth.users.filter(user => user._id !== auth._id).filter(item => {\r\n            return item['firstName'].toLowerCase().includes(search.toLowerCase())\r\n                || item['lastName'].toLowerCase().includes(search.toLowerCase())\r\n        })\r\n    }\r\n\r\n    const valueChangeSearchHandler = (event) => {\r\n        setSearch(event.target.value)\r\n    }\r\n\r\n    const filteredData = getFilteredData()\r\n\r\n    return (\r\n        <div>\r\n            {!auth.loadingUser && !auth.loadingUsers ? (auth.authenticated ? (\r\n                <div className={styles.wrapper}>\r\n                    <div className={styles.header}>\r\n                        <div className={styles.content}>\r\n                            <img src={auth.avatar} className={styles.contentImg}\r\n                                 alt=\"\"/>\r\n                            <div className={styles.details}>\r\n                                <div\r\n                                    className={styles.userListDetailsFirstChild}>\r\n                                    {auth.firstName + \" \" + auth.lastName}\r\n                                </div>\r\n                                <div className={styles.userListDetailsLastChild}>\r\n                                    active now\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className={styles.logout} onClick={logoutHandler}>\r\n                            <Link to=\"/\"><span>logout</span></Link>\r\n                        </div>\r\n                    </div>\r\n                    <div className={styles.search}>\r\n                        <input autoFocus type=\"text\" placeholder={'Search...'}\r\n                               value={search}\r\n                               onChange={valueChangeSearchHandler}\r\n                        />\r\n                        <div className={styles.faSearch}><FontAwesomeIcon icon={faSearch}/></div>\r\n                    </div>\r\n                    <div>\r\n                        <Users users={filteredData}\r\n                               socket={socket}\r\n                               onlineUsers={onlineUsers}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            ) : (<div>\r\n                {history.push('/login')}\r\n            </div>)) : (\r\n                <div>\r\n                    <div className=\"lds-ripple\">\r\n                        <div></div>\r\n                        <div></div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Home)","import React, {useContext, useEffect, useState} from \"react\";\r\nimport styles from './register.module.css'\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport UserContext from \"../../context/User/UserContext\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faEye, faEyeSlash} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\n\r\nconst Register = (props) => {\r\n\r\n    const auth = useContext(UserContext)\r\n\r\n    const [fileInputState, setFileInputState] = useState('');\r\n    const [userAvatar, setUserAvatar] = useState('')\r\n\r\n    const [values, setValues] = useState({\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        password: '',\r\n        showPassword: false\r\n    })\r\n\r\n    const handleClickShowPassword = () => {\r\n        setValues({...values, showPassword: !values.showPassword});\r\n    };\r\n\r\n    const handleImageChange = (e) => {\r\n        const file = e.target.files[0];\r\n        setFileInputState(e.target.value);\r\n\r\n        if (!file) return;\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onloadend = () => {\r\n            const newImage = {\r\n                avatar: reader.result\r\n            };\r\n            setUserAvatar(newImage.avatar)\r\n\r\n        };\r\n    }\r\n\r\n    useEffect(() => {\r\n        auth.cleanErrors()\r\n    }, [])\r\n\r\n    const handleChange = (event) => {\r\n        setValues({\r\n            ...values,\r\n            [event.target.name]: event.target.value\r\n        })\r\n    }\r\n\r\n\r\n    const registerHandler = async (event) => {\r\n        event.preventDefault()\r\n        const userData = {\r\n            firstName: values.firstName,\r\n            lastName: values.lastName,\r\n            email: values.email,\r\n            password: values.password,\r\n            avatar: userAvatar\r\n        }\r\n        auth.register(userData, props.history, props.setupSocket)\r\n    }\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.form}>\r\n                <div>\r\n                    <h1 className={styles.title}>Sign up</h1>\r\n                </div>\r\n                <form className={styles.formWrapper}>\r\n                    <div className={styles.border}>\r\n                        <div className={styles.field}>\r\n                            <label className={styles.label}>First Name</label>\r\n                            <input className={styles.input} type=\"text\" name={'firstName'}\r\n                                   value={values.firstName} onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        <div className={styles.field}>\r\n                            <label className={styles.label}>Last Name</label>\r\n                            <input className={styles.input} type=\"text\" name={'lastName'}\r\n                                   value={values.lastName} onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        <div className={styles.field}>\r\n                            <label className={styles.label}>Email</label>\r\n                            <input className={styles.input} type=\"email\" name={'email'}\r\n                                   value={values.email} onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        <div className={styles.field}>\r\n                            <label className={styles.label}>Password</label>\r\n                            <div className={styles.fieldPass}>\r\n                                <input className={styles.input}\r\n                                       type={values.showPassword ? \"text\" : \"password\"}\r\n                                       name={'password'}\r\n                                       value={values.password} onChange={handleChange}\r\n                                />\r\n                                <div className={styles.fieldPassItem}\r\n                                     onClick={handleClickShowPassword}\r\n                                >\r\n                                    {values.showPassword ?\r\n                                        <FontAwesomeIcon icon={faEye}/> :\r\n                                        <FontAwesomeIcon icon={faEyeSlash}/>}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className={styles.registerImage}>\r\n                            <label className={styles.registerImageLabel}>Select image </label>\r\n                            <input type=\"file\" onChange={handleImageChange}\r\n                                   value={fileInputState}/>\r\n                        </div>\r\n                        {auth.errors && <div className={styles.errors}><span>{auth.errors}</span></div>}\r\n                    </div>\r\n                    <div className={styles.field}>\r\n                        <button\r\n                            className={styles.submit}\r\n                            onClick={registerHandler}\r\n                            disabled={auth.loading}\r\n                        >\r\n                            Sign up\r\n                        </button>\r\n                    </div>\r\n                    <div className={styles.link}>\r\n                        <div className={styles.linkText}>\r\n                            already have an account? sign in\r\n                            <span><Link to=\"/login\"> here</Link></span>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default withRouter(Register)","import React, {useContext, useEffect, useState} from \"react\";\r\nimport styles from './login.module.css'\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport UserContext from \"../../context/User/UserContext\";\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faEye} from '@fortawesome/free-solid-svg-icons'\r\nimport {faEyeSlash} from '@fortawesome/free-solid-svg-icons'\r\nimport GoogleLogin from \"react-google-login\";\r\n\r\nconst Login = (props) => {\r\n\r\n    const auth = useContext(UserContext)\r\n\r\n    const [values, setValues] = useState({\r\n        email: '',\r\n        password: '',\r\n        showPassword: false\r\n    })\r\n\r\n    useEffect(() => {\r\n        auth.cleanErrors()\r\n    }, [])\r\n\r\n\r\n    const handleClickShowPassword = () => {\r\n        setValues({...values, showPassword: !values.showPassword});\r\n    };\r\n\r\n    const handleChange = (event) => {\r\n        setValues({\r\n            ...values,\r\n            [event.target.name]: event.target.value\r\n        })\r\n    }\r\n\r\n    const loginHandler = async (event) => {\r\n        event.preventDefault()\r\n        const userData = {\r\n            email: values.email,\r\n            password: values.password\r\n        }\r\n        auth.login(userData, props.history, props.setupSocket)\r\n    }\r\n\r\n    const responseSuccessGoogle = async (response) => {\r\n        auth.loginGoogle(response, props.history, props.setupSocket)\r\n    }\r\n\r\n    const responseErrorGoogle = () => {\r\n        console.log('login Google failed')\r\n    }\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.form}>\r\n                <div>\r\n                    <h1 className={styles.title}>Sign in</h1>\r\n                </div>\r\n                <form className={styles.formWrapper}>\r\n                    <div className={styles.border}>\r\n                        <div className={styles.field}>\r\n                            <label className={styles.label}>Email</label>\r\n                            <input className={styles.input} type=\"email\" name={'email'}\r\n                                   value={values.email} onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        <div className={styles.field}>\r\n                            <label className={styles.label}>Password</label>\r\n                            <div className={styles.fieldPass}>\r\n                                <input className={styles.input}\r\n                                       type={values.showPassword ? \"text\" : \"password\"}\r\n                                       name={'password'}\r\n                                       value={values.password} onChange={handleChange}\r\n                                />\r\n                                <div className={styles.fieldPassItem}\r\n                                     onClick={handleClickShowPassword}\r\n                                >\r\n                                    {values.showPassword ?\r\n                                        <FontAwesomeIcon icon={faEye}/> :\r\n                                        <FontAwesomeIcon icon={faEyeSlash}/>}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className={styles.linkForgot}>\r\n                            <div className={styles.linkTextForgot}>\r\n                                <span><Link to=\"/forgotPassword\">forgot password?</Link></span>\r\n                            </div>\r\n                        </div>\r\n                        {auth.errors && <div className={styles.errors}><span>{auth.errors}</span></div>}\r\n                    </div>\r\n                    <div className={styles.field}>\r\n                        <button\r\n                            className={styles.submit}\r\n                            onClick={loginHandler}\r\n                            disabled={auth.loading}\r\n                        >\r\n                            Sign in\r\n                        </button>\r\n                    </div>\r\n                    <div className={styles.googleButton}>\r\n                        <GoogleLogin\r\n                            clientId=\"333550360272-m38ff1ba54kec3jfn8gb7aliuf47k3uh.apps.googleusercontent.com\"\r\n                            buttonText=\"Login with Google\"\r\n                            onSuccess={responseSuccessGoogle}\r\n                            onFailure={responseErrorGoogle}\r\n                            cookiePolicy={'single_host_origin'}\r\n                        />\r\n                    </div>\r\n                    <div className={styles.link}>\r\n                        <div className={styles.linkText}>\r\n                            don't have an account? sign up <span><Link to=\"/register\"> here</Link></span>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Login)","import React from \"react\";\r\nimport styles from '../pages/Chat/chat.module.css'\r\n\r\nconst Message = ({message, own, newUser}) => {\r\n\r\n    return (\r\n        <>\r\n            {!!own ? (\r\n                <div className={styles.chat + \" \" + styles.outgoing}>\r\n                    <div className={styles.chatDetails}>\r\n                        <p>{message.text}</p>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className={styles.chat + \" \" + styles.incoming}>\r\n                    <img src={newUser.avatar}\r\n                         alt=\"\"/>\r\n                    <div className={styles.chatDetails}>\r\n                        <p>{message.text}</p>\r\n                    </div>\r\n                </div>\r\n            )\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Message","import React, {useContext, useEffect, useRef, useState} from \"react\";\r\nimport UserContext from \"../../context/User/UserContext\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {faArrowLeft, faReply} from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport styles from './chat.module.css'\r\nimport ConversationContext from \"../../context/Conversation/ConversationContext\";\r\nimport Message from \"../../components/Message\";\r\n\r\nconst Chat = (props) => {\r\n\r\n    const auth = useContext(UserContext)\r\n    const conv = useContext(ConversationContext)\r\n    const scrollRef = useRef()\r\n\r\n    const [text, setText] = useState('')\r\n    const [messages, setMessages] = useState([]);\r\n    const [arrivalMessage, setArrivalMessage] = useState(null)\r\n\r\n\r\n    useEffect(() => {\r\n        props.socket && props.socket.on(\"getMessage\", data => {\r\n            setArrivalMessage({\r\n                conversation: conv.conversation._id,\r\n                sender: data.senderId,\r\n                text: data.text,\r\n            })\r\n        })\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (arrivalMessage && conv.conversation.members.includes(arrivalMessage.sender)) {\r\n            setMessages((prev) => [...prev, arrivalMessage]);\r\n        }\r\n    }, [arrivalMessage])\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if (!auth.loadingUser) {\r\n            const userId = props.match.params.userId;\r\n            auth.getNewUser(userId)\r\n            const sendData = {\r\n                sender: auth._id,\r\n                receiver: userId\r\n            }\r\n            conv.getOneConversation(sendData)\r\n        }\r\n    }, [auth.loadingUser])\r\n\r\n    useEffect(() => {\r\n\r\n        if (!messages.length) {\r\n            setMessages(conv.messages)\r\n        } else {\r\n            setMessages(messages)\r\n        }\r\n        return () => {\r\n            setMessages([])\r\n        }\r\n    }, [conv.messages])\r\n\r\n\r\n    useEffect(() => {\r\n        if (conv.conversation._id) {\r\n            conv.getMessages(conv.conversation._id)\r\n        }\r\n    }, [conv.conversation._id])\r\n\r\n\r\n    const onChangeTextHandler = (event) => {\r\n        setText(event.target.value)\r\n    }\r\n\r\n    const onClickButton = (event) => {\r\n        event.preventDefault()\r\n\r\n        if (text) {\r\n            const sendData = {\r\n                conversation: conv.conversation._id,\r\n                sender: auth._id,\r\n                text\r\n            }\r\n\r\n            props.socket.emit('sendMessage', {\r\n                senderId: auth._id,\r\n                receiverId: props.match.params.userId,\r\n                text,\r\n                conversation: conv.conversation._id\r\n            })\r\n\r\n            conv.addMessage(sendData)\r\n            setMessages([...messages, sendData]);\r\n            setText('')\r\n\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        scrollRef.current?.scrollIntoView({behavior: 'smooth'})\r\n    }, [messages])\r\n\r\n    const handleClickBack = (event) => {\r\n        event.preventDefault()\r\n        props.history.push('/')\r\n        auth.emptyNewUser()\r\n        conv.setEmptyConvMess()\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!auth.loadingUser && !auth.loadingNewUser && auth.newUser\r\n                ? (auth.authenticated ? (\r\n                    <div className={styles.chatWrapper}>\r\n                        <div className={styles.chatHeader}>\r\n                            <div onClick={handleClickBack}><FontAwesomeIcon icon={faArrowLeft}/></div>\r\n                            <img src={auth.newUser.avatar}\r\n                                 alt=\"\"/>\r\n                            <div className={styles.chatTitle}>\r\n                                <div>{auth.newUser.firstName\r\n                                + \" \" + auth.newUser.lastName}</div>\r\n                                {props.onlineUsers && props.onlineUsers.includes(props.match.params.userId)\r\n                                    ? <div>active now</div> : <div>offline now</div>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                        <div className={styles.chatBox}>\r\n                            {messages && messages.length > 0 && messages.map((mes, index) => (\r\n                                <div key={index} ref={scrollRef}>\r\n                                    <Message\r\n                                        message={mes}\r\n                                        own={mes.sender === auth._id}\r\n                                        newUser={auth.newUser}\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        <form action=\"\" className={styles.chatForm}>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder={'write...'}\r\n                                value={text}\r\n                                onChange={onChangeTextHandler}\r\n                            />\r\n                            <button onClick={onClickButton}><FontAwesomeIcon icon={faReply}/></button>\r\n                        </form>\r\n                    </div>) : <div>\r\n                    {props.history.push('/login')}\r\n                </div>) : <div>\r\n                    <div className=\"lds-ripple\">\r\n                        <div></div>\r\n                        <div></div>\r\n                    </div>\r\n                </div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Chat)","import React, {useContext, useEffect, useState} from \"react\";\r\nimport styles from \"./forgotPassword.module.css\";\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport UserContext from \"../../context/User/UserContext\";\r\n\r\nconst ForgotPassword = (props) => {\r\n\r\n    const auth = useContext(UserContext)\r\n\r\n    const [values, setValues] = useState({\r\n        email: ''\r\n    })\r\n\r\n    useEffect(() => {\r\n        auth.cleanErrors()\r\n    }, [])\r\n\r\n    const handleChange = (event) => {\r\n        setValues({\r\n            ...values,\r\n            [event.target.name]: event.target.value\r\n        })\r\n    }\r\n\r\n    const forgotPassword = async (event) => {\r\n        event.preventDefault()\r\n        const userData = {\r\n            email: values.email\r\n        }\r\n        auth.forgotPassword(userData, props.history)\r\n    }\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.form}>\r\n                <div>\r\n                    <h1 className={styles.title}>Reset Password</h1>\r\n                </div>\r\n                <form className={styles.formWrapper}>\r\n                    <div className={styles.border}>\r\n                        <div className={styles.field}>\r\n                            <label className={styles.label}>Email</label>\r\n                            <input className={styles.input} type=\"email\" name={'email'}\r\n                                   value={values.email} onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        {auth.errors && <div className={styles.errors}><span>{auth.errors}</span></div>}\r\n                    </div>\r\n                    <div className={styles.field}>\r\n                        <button\r\n                            className={styles.submit}\r\n                            onClick={forgotPassword}\r\n                            disabled={auth.loading}\r\n                        >\r\n                            Submit\r\n                        </button>\r\n                    </div>\r\n                    <div className={styles.link}>\r\n                        <div className={styles.linkText}>\r\n                            back to login page <span><Link to=\"/login\"> here</Link></span>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(ForgotPassword)","import React, {useContext, useEffect, useState} from \"react\";\r\nimport styles from \"./resetPassword.module.css\";\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport UserContext from \"../../context/User/UserContext\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faEye, faEyeSlash} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\n\r\nconst ResetPassword = (props) => {\r\n\r\n    const auth = useContext(UserContext)\r\n\r\n    const [values, setValues] = useState({\r\n        password: '',\r\n        showPassword: false\r\n    })\r\n\r\n    useEffect(() => {\r\n        auth.cleanErrors()\r\n        auth.resetPassword(props.match.params.token)\r\n    }, [])\r\n\r\n    const handleChange = (event) => {\r\n        setValues({\r\n            ...values,\r\n            [event.target.name]: event.target.value\r\n        })\r\n    }\r\n\r\n    const handleClickShowPassword = () => {\r\n        setValues({...values, showPassword: !values.showPassword});\r\n    };\r\n\r\n    const changePassword = async (event) => {\r\n        event.preventDefault()\r\n        const userData = {\r\n            password: values.password,\r\n            email: auth.resetEmail\r\n        }\r\n        auth.updatePasswordViaEmail(userData, props.history)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {auth.errorsReset ? <div>\r\n                <div className={styles.container}>\r\n                    <div className={styles.form}>\r\n                        <div>\r\n                            <h2 className={styles.title}>Problem resetting password.\r\n                                Please send another reset link.\r\n                            </h2>\r\n                        </div>\r\n                        <div className={styles.field}>\r\n                            <Link className={styles.submitLink} to=\"/\">\r\n                                <div>Go home</div>\r\n                            </Link>\r\n                        </div>\r\n                        <div className={styles.field}>\r\n                            <Link className={styles.submitLink} to=\"/forgotPassword\">\r\n                                <div>Forgot Password</div>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div> : (\r\n                <div className={styles.container}>\r\n                    <div className={styles.form}>\r\n                        <div>\r\n                            <h1 className={styles.title}>Change Password</h1>\r\n                        </div>\r\n                        <form className={styles.formWrapper}>\r\n                            <div className={styles.field}>\r\n                                <label className={styles.label}>New password</label>\r\n                                <div className={styles.fieldPass}>\r\n                                    <input className={styles.input}\r\n                                           type={values.showPassword ? \"text\" : \"password\"}\r\n                                           name={'password'}\r\n                                           value={values.password} onChange={handleChange}\r\n                                    />\r\n                                    <div className={styles.fieldPassItem}\r\n                                         onClick={handleClickShowPassword}\r\n                                    >\r\n                                        {values.showPassword ?\r\n                                            <FontAwesomeIcon icon={faEye}/> :\r\n                                            <FontAwesomeIcon icon={faEyeSlash}/>}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            {auth.errors && <div className={styles.errors}><span>{auth.errors}</span></div>}\r\n                            <div className={styles.field}>\r\n                                <button\r\n                                    className={styles.submit}\r\n                                    onClick={changePassword}\r\n                                    disabled={auth.loading}\r\n                                >\r\n                                    Submit\r\n                                </button>\r\n                            </div>\r\n                            <div className={styles.link}>\r\n                                <div className={styles.linkText}>\r\n                                    back to login page <span><Link to=\"/login\"> here</Link></span>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    )\r\n}\r\nexport default withRouter(ResetPassword)","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {BrowserRouter as Router} from 'react-router-dom'\r\nimport {useRoutes} from \"./routes\";\r\nimport UserContext from \"./context/User/UserContext\";\r\nimport axios from \"axios\";\r\n\r\n// socket.io\r\nimport {io} from 'socket.io-client'\r\n\r\nconst token = localStorage.FBIdToken;\r\nconst ENDPOINT = 'http://localhost:5000'\r\n\r\nfunction App() {\r\n\r\n    const [socket, setSocket] = useState(null)\r\n    const [onlineUsers, setOnlineUsers] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const auth = useContext(UserContext)\r\n\r\n    const setupSocket = () => {\r\n        const authToken = localStorage.getItem('FBIdToken')\r\n        if (authToken && !socket) {\r\n            const newSocket = io(ENDPOINT,\r\n                {query: {token: localStorage.getItem('FBIdToken')}}\r\n            )\r\n\r\n            newSocket.on('connect', () => {\r\n                console.log(`Socket connected ` + newSocket.id)\r\n            })\r\n\r\n            setSocket(newSocket)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        if (token) {\r\n            auth.setAuthenticated()\r\n            axios.defaults.headers.common['Authorization'] = token;\r\n            auth.getUserData();\r\n            setupSocket()\r\n        }\r\n        setLoading(true)\r\n\r\n    }, [token])\r\n\r\n\r\n    useEffect(() => {\r\n        if (auth && auth._id) {\r\n            socket.emit('addUser', auth._id)\r\n            socket.on(\"getUsers\", (users) => {\r\n                setOnlineUsers(users)\r\n            })\r\n\r\n        }\r\n\r\n    }, [auth, auth._id])\r\n\r\n\r\n    const routes = useRoutes(\r\n        {\r\n            isAuthenticated: auth.authenticated,\r\n            setupSocket,\r\n            socket,\r\n            onlineUsers\r\n        })\r\n\r\n    return (\r\n        <Router>\r\n            <div className=\"App\">\r\n                {loading && routes}\r\n            </div>\r\n        </Router>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport {Redirect, Route, Switch} from 'react-router-dom'\r\nimport Home from \"./pages/Home/Home\";\r\nimport Register from \"./pages/Register/Register\";\r\nimport Login from \"./pages/Login/Login\";\r\nimport Chat from \"./pages/Chat/Chat\";\r\nimport ForgotPassword from \"./pages/ForgorPassword/ForgotPassword\";\r\nimport ResetPassword from \"./pages/ResetPassword/ResetPassword\";\r\n\r\nexport const useRoutes = ({isAuthenticated, setupSocket, socket, onlineUsers}) => {\r\n    if (isAuthenticated) {\r\n        return (\r\n            <Switch>\r\n                <Route\r\n                    path=\"/\"\r\n                    render={() => <Home socket={socket} onlineUsers={onlineUsers}/>}\r\n                    exact\r\n                />\r\n                <Route\r\n                    path=\"/user/:userId\"\r\n                    render={() => <Chat socket={socket} onlineUsers={onlineUsers}/>}\r\n                    exact\r\n                />\r\n                <Redirect to=\"/\"/>\r\n            </Switch>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            <Route\r\n                path=\"/register\"\r\n                render={() => <Register setupSocket={setupSocket}/>}\r\n                exact\r\n            />\r\n            <Route\r\n                path=\"/login\"\r\n                render={() => <Login setupSocket={setupSocket}/>}\r\n                exact\r\n            />\r\n            <Route\r\n                path=\"/forgotPassword\"\r\n                render={() => <ForgotPassword/>}\r\n                exact\r\n            />\r\n            <Route\r\n                path=\"/reset/:token\"\r\n                render={() => <ResetPassword/>}\r\n                exact\r\n            />\r\n            <Redirect to=\"/login\"/>\r\n        </Switch>\r\n    )\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","export const SET_AUTHENTICATED = 'SET_AUTHENTICATED';\r\nexport const SET_UNAUTHENTICATED = 'SET_UNAUTHENTICATED';\r\nexport const SET_USER = 'SET_USER';\r\nexport const SET_USERS = 'SET_USERS';\r\nexport const SET_NEW_USER = 'SET_NEW_USER';\r\nexport const LOADING = 'LOADING';\r\nexport const UNLOADING = 'UNLOADING';\r\nexport const LOADING_USER = 'LOADING_USER';\r\nexport const LOADING_USERS = 'LOADING_USERS';\r\nexport const LOADING_NEW_USER = 'LOADING_NEW_USER';\r\nexport const SET_ERRORS = 'SET_ERRORS';\r\nexport const CLEAR_ERRORS = 'CLEAR_ERRORS';\r\nexport const SET_NEW_USER_EMPTY = 'SET_NEW_USER_EMPTY'\r\n\r\nexport const SET_ERRORS_RESET = 'SET_ERRORS_RESET';\r\nexport const CLEAR_ERRORS_RESET = 'CLEAR_ERRORS_RESET';\r\n\r\nexport const LOADING_RESET = 'LOADING_RESET';\r\nexport const UNLOADING_RESET = 'UNLOADING_RESET';\r\n\r\nexport const RESET_EMAIL = 'RESET_EMAIL';\r\nexport const UPDATE_PASSWORD = 'UPDATE_PASSWORD';\r\n\r\n\r\n","import {\r\n    CLEAR_ERRORS, CLEAR_ERRORS_RESET, LOADING, LOADING_NEW_USER, LOADING_RESET,\r\n    LOADING_USER, LOADING_USERS, RESET_EMAIL,\r\n    SET_AUTHENTICATED,\r\n    SET_ERRORS, SET_ERRORS_RESET, SET_NEW_USER, SET_NEW_USER_EMPTY,\r\n    SET_UNAUTHENTICATED,\r\n    SET_USER,\r\n    SET_USERS, UNLOADING, UNLOADING_RESET, UPDATE_PASSWORD\r\n} from \"./UserTypes\";\r\n\r\n\r\nfunction noop() {\r\n}\r\n\r\nconst initialState = {\r\n    authenticated: false,\r\n    _id: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    avatar: '',\r\n    loadingUser: false,\r\n    loadingUsers: false,\r\n    loadingNewUser: false,\r\n    loadingReset: false,\r\n    errors: null,\r\n    errorsReset: null,\r\n    users: [],\r\n    newUser: {},\r\n    resetEmail: '',\r\n    password: '',\r\n    login: noop,\r\n    logout: noop\r\n\r\n};\r\n\r\nconst UserReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case SET_AUTHENTICATED:\r\n            return {\r\n                ...state,\r\n                authenticated: true\r\n            }\r\n        case SET_UNAUTHENTICATED: {\r\n            return initialState\r\n        }\r\n        case LOADING:\r\n            return {\r\n                ...state,\r\n                loading: true\r\n            };\r\n        case UNLOADING:\r\n            return {\r\n                ...state,\r\n                loading: false\r\n            };\r\n        case LOADING_USER:\r\n            return {\r\n                ...state,\r\n                loadingUser: true\r\n            };\r\n        case LOADING_USERS:\r\n            return {\r\n                ...state,\r\n                loadingUsers: true\r\n            };\r\n        case LOADING_NEW_USER:\r\n            return {\r\n                ...state,\r\n                loadingNewUser: true\r\n\r\n            };\r\n        case SET_ERRORS: {\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                errors: action.payload\r\n            }\r\n        }\r\n        case CLEAR_ERRORS: {\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                errors: []\r\n            }\r\n        }\r\n        case SET_USER: {\r\n            return {\r\n                authenticated: true,\r\n                loadingUser: false,\r\n                ...action.payload\r\n            }\r\n        }\r\n        case SET_USERS: {\r\n            return {\r\n                ...state,\r\n                users: action.payload,\r\n                loadingUsers: false\r\n            }\r\n        }\r\n        case SET_NEW_USER: {\r\n            return {\r\n                ...state,\r\n                newUser: action.payload,\r\n                loadingNewUser: false\r\n            }\r\n        }\r\n        case SET_NEW_USER_EMPTY: {\r\n            return {\r\n                ...state,\r\n                newUser: {}\r\n            }\r\n        }\r\n        case SET_ERRORS_RESET: {\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                errorsReset: action.payload\r\n            }\r\n        }\r\n        case CLEAR_ERRORS_RESET: {\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                errorsReset: []\r\n            }\r\n        }\r\n        case LOADING_RESET: {\r\n            return {\r\n                ...state,\r\n                loadingReset: true\r\n            }\r\n        }\r\n        case UNLOADING_RESET: {\r\n            return {\r\n                ...state,\r\n                loadingReset: false\r\n            }\r\n        }\r\n        case RESET_EMAIL: {\r\n            return {\r\n                ...state,\r\n                resetEmail: action.payload\r\n            }\r\n        }\r\n        case UPDATE_PASSWORD: {\r\n            return {\r\n                ...state,\r\n                password: action.payload\r\n            }\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport {initialState, UserReducer}","import UserContext from \"./UserContext\";\r\nimport {useReducer} from \"react\";\r\nimport axios from 'axios'\r\nimport {initialState, UserReducer} from \"./UserReducer\";\r\nimport {\r\n    CLEAR_ERRORS, CLEAR_ERRORS_RESET,\r\n    LOADING, LOADING_NEW_USER, LOADING_RESET,\r\n    LOADING_USER,\r\n    LOADING_USERS, RESET_EMAIL,\r\n    SET_AUTHENTICATED,\r\n    SET_ERRORS, SET_ERRORS_RESET, SET_NEW_USER, SET_NEW_USER_EMPTY, SET_UNAUTHENTICATED,\r\n    SET_USER,\r\n    SET_USERS, UNLOADING, UNLOADING_RESET, UPDATE_PASSWORD\r\n} from \"./UserTypes\";\r\n\r\n\r\nconst UserProvider = (props) => {\r\n\r\n    const [state, dispatch] = useReducer(UserReducer, initialState);\r\n\r\n\r\n    const login = (userData, history, setupSocket) => {\r\n        dispatch({type: LOADING})\r\n        axios.post('/auth/signin', userData)\r\n            .then((res) => {\r\n                setAuthorizationHeader(res.data.token)\r\n                getUserData()\r\n                dispatch({type: CLEAR_ERRORS})\r\n                dispatch({type: UNLOADING})\r\n                history.push('/')\r\n                setupSocket()\r\n\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors', err.response.data.message)\r\n                dispatch({\r\n                    type: SET_ERRORS,\r\n                    payload: err.response.data.message\r\n                })\r\n            })\r\n    }\r\n\r\n    const loginGoogle = (response, history, setupSocket) => {\r\n        dispatch({type: LOADING})\r\n        axios.post('/auth/googleLogin', {token: response.tokenId})\r\n            .then((res) => {\r\n                setAuthorizationHeader(res.data.token)\r\n                getUserData()\r\n                dispatch({type: CLEAR_ERRORS})\r\n                dispatch({type: UNLOADING})\r\n                history.push('/')\r\n                setupSocket()\r\n\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors', err.response.data.message)\r\n                dispatch({\r\n                    type: SET_ERRORS,\r\n                    payload: err.response.data.message\r\n                })\r\n            })\r\n    }\r\n\r\n    const register = (newUserData, history, setupSocket) => {\r\n        dispatch({type: LOADING})\r\n        axios.post('/auth/signup', newUserData)\r\n            .then((res) => {\r\n                setAuthorizationHeader(res.data.token)\r\n                getUserData()\r\n                dispatch({type: CLEAR_ERRORS})\r\n                dispatch({type: UNLOADING})\r\n                history.push('/')\r\n                setupSocket()\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors', err.response.data.message)\r\n                dispatch({\r\n                    type: SET_ERRORS,\r\n                    payload: err.response.data.message\r\n                })\r\n            })\r\n    }\r\n\r\n\r\n    const logoutUser = (history) => {\r\n        localStorage.removeItem('FBIdToken');\r\n        delete axios.defaults.headers.common['Authorization'];\r\n        dispatch({type: SET_UNAUTHENTICATED});\r\n        history.push('/login')\r\n    };\r\n\r\n\r\n    const getUserData = () => {\r\n        dispatch({type: LOADING_USER});\r\n        axios.get(`/user/me`)\r\n            .then(res => {\r\n                dispatch({\r\n                    type: SET_USER,\r\n                    payload: res.data\r\n                })\r\n                getAllUsers()\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n\r\n    const getAllUsers = () => {\r\n        dispatch({type: LOADING_USERS})\r\n        axios.get('/user/')\r\n            .then(res => {\r\n                dispatch({\r\n                    type: SET_USERS,\r\n                    payload: res.data\r\n                })\r\n            })\r\n            .catch(() => {\r\n                dispatch({\r\n                    type: SET_USERS,\r\n                    payload: []\r\n                })\r\n            })\r\n    }\r\n\r\n    const getNewUser = (userId) => {\r\n        dispatch({type: LOADING_NEW_USER})\r\n        axios.get(`/user/${userId}`)\r\n            .then((res) => {\r\n                dispatch({\r\n                    type: SET_NEW_USER,\r\n                    payload: res.data\r\n                })\r\n            })\r\n            .catch((err) => console.log(err))\r\n    }\r\n\r\n    const setAuthorizationHeader = (token) => {\r\n        const FBIdToken = `Bearer ${token}`;\r\n        localStorage.setItem('FBIdToken', FBIdToken);\r\n        axios.defaults.headers.common['Authorization'] = FBIdToken;\r\n    };\r\n\r\n\r\n    const forgotPassword = (userData, history) => {\r\n        dispatch({type: LOADING})\r\n        axios.post('/auth/forgotPassword', userData)\r\n            .then((res) => {\r\n                console.log('res ', res)\r\n                dispatch({type: CLEAR_ERRORS})\r\n                dispatch({type: UNLOADING})\r\n                history.push('/login')\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors: ', err.response.data.message)\r\n                dispatch({\r\n                    type: SET_ERRORS,\r\n                    payload: err.response.data.message\r\n                })\r\n            })\r\n    }\r\n\r\n    const resetPassword = (userData) => {\r\n        dispatch({type: LOADING_RESET})\r\n        axios.get('/auth/reset/' + userData)\r\n            .then((res) => {\r\n                dispatch({\r\n                    type: RESET_EMAIL,\r\n                    payload: res.data.email\r\n                })\r\n                dispatch({type: SET_ERRORS_RESET})\r\n                dispatch({type: UNLOADING_RESET})\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors: ', err.response.data.message)\r\n                dispatch({\r\n                    type: CLEAR_ERRORS_RESET,\r\n                    payload: err.response.data.message\r\n                })\r\n            })\r\n    }\r\n\r\n    const updatePasswordViaEmail = (userData, history) => {\r\n        dispatch({type: LOADING})\r\n        console.log('userData', userData)\r\n        axios.post('/auth/updatePasswordViaEmail', userData)\r\n            .then((res) => {\r\n                dispatch({\r\n                    type: UPDATE_PASSWORD,\r\n                    payload: res.data.password\r\n                })\r\n                dispatch({type: CLEAR_ERRORS})\r\n                dispatch({type: UNLOADING})\r\n                history.push('/login')\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors: ', err.response.data.message)\r\n                dispatch({\r\n                    type: SET_ERRORS,\r\n                    payload: err.response.data.message\r\n                })\r\n            })\r\n    }\r\n\r\n    const setAuthenticated = () => {\r\n        dispatch({type: SET_AUTHENTICATED});\r\n    }\r\n\r\n    const cleanErrors = () => {\r\n        dispatch({type: CLEAR_ERRORS})\r\n    }\r\n\r\n    const emptyNewUser = () => {\r\n        dispatch({type: SET_NEW_USER_EMPTY})\r\n    }\r\n\r\n    return (\r\n        <UserContext.Provider value={{\r\n            loading: state.loading,\r\n            loadingUser: state.loadingUser,\r\n            loadingUsers: state.loadingUsers,\r\n            loadingNewUser: state.loadingNewUser,\r\n            authenticated: state.authenticated,\r\n            errors: state.errors,\r\n            _id: state._id,\r\n            firstName: state.firstName,\r\n            lastName: state.lastName,\r\n            email: state.email,\r\n            avatar: state.avatar,\r\n            users: state.users,\r\n            newUser: state.newUser,\r\n            errorsReset: state.errorsReset,\r\n            loadingReset: state.loadingReset,\r\n            resetEmail: state.resetEmail,\r\n            login,\r\n            register,\r\n            logoutUser,\r\n            getUserData,\r\n            getNewUser,\r\n            setAuthenticated,\r\n            cleanErrors,\r\n            emptyNewUser,\r\n            loginGoogle,\r\n            forgotPassword,\r\n            resetPassword,\r\n            updatePasswordViaEmail\r\n        }\r\n        }>\r\n            {props.children}\r\n        </UserContext.Provider>\r\n    )\r\n}\r\n\r\nexport default UserProvider","// conversation\r\nexport const ADD_CONVERSATION = 'ADD_CONVERSATION';\r\nexport const SET_CONVERSATIONS = 'SET_CONVERSATIONS';\r\nexport const SET_CONVERSATION = 'SET_CONVERSATION';\r\n\r\n// messages\r\nexport const SET_MESSAGES = 'SET_MESSAGES';\r\nexport const ADD_MESSAGE = 'ADD_MESSAGE';\r\n\r\n//loading\r\nexport const CONVERSATIONS_LOADING = 'CONVERSATIONS_LOADING';\r\nexport const CONVERSATION_LOADING = 'CONVERSATION_LOADING';\r\nexport const MESSAGES_LOADING = 'MESSAGES_LOADING';\r\n\r\n// set empty\r\nexport const SET_EMPTY_CONV_MESS = 'SET_EMPTY_CONV_MESS';","import {\r\n    ADD_CONVERSATION, ADD_MESSAGE,\r\n    CONVERSATION_LOADING,\r\n    CONVERSATIONS_LOADING, MESSAGES_LOADING,\r\n    SET_CONVERSATION,\r\n    SET_CONVERSATIONS, SET_EMPTY_CONV_MESS, SET_MESSAGES\r\n} from \"./ConversationTypes\";\r\n\r\n\r\nconst initialState = {\r\n    conversations: [],\r\n    messages: [],\r\n    conversation: {},\r\n    conversationsLoading: false,\r\n    oneConversationLoading: false,\r\n    messageLoading: false,\r\n\r\n};\r\n\r\nconst ConversationReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case CONVERSATIONS_LOADING:\r\n            return {\r\n                ...state,\r\n                conversationsLoading: true\r\n            }\r\n        case CONVERSATION_LOADING:\r\n            return {\r\n                ...state,\r\n                oneConversationLoading: true\r\n            }\r\n        case MESSAGES_LOADING:\r\n            return {\r\n                ...state,\r\n                messageLoading: true\r\n            }\r\n        case SET_CONVERSATIONS:\r\n            return {\r\n                ...state,\r\n                conversations: action.payload,\r\n                conversationsLoading: false\r\n            }\r\n        case SET_CONVERSATION:\r\n            return {\r\n                ...state,\r\n                conversation: action.payload,\r\n                oneConversationLoading: false\r\n            }\r\n        case ADD_CONVERSATION:\r\n            return {\r\n                ...state,\r\n                conversations: [...state.conversations, action.payload]\r\n            }\r\n        case SET_MESSAGES:\r\n            return {\r\n                ...state,\r\n                messages: action.payload,\r\n                messageLoading: false\r\n            }\r\n        case ADD_MESSAGE:\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, action.payload]\r\n            }\r\n        case SET_EMPTY_CONV_MESS:\r\n            return {\r\n                ...state,\r\n                messages: [],\r\n                conversation: {}\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport {initialState, ConversationReducer}","import ConversationContext from \"./ConversationContext\";\r\nimport {useReducer} from \"react\";\r\nimport {ConversationReducer, initialState} from \"./ConversationReducer\";\r\nimport axios from \"axios\";\r\nimport {\r\n    ADD_CONVERSATION,\r\n    ADD_MESSAGE,\r\n    CONVERSATION_LOADING,\r\n    CONVERSATIONS_LOADING,\r\n    MESSAGES_LOADING,\r\n    SET_CONVERSATION,\r\n    SET_CONVERSATIONS, SET_EMPTY_CONV_MESS,\r\n    SET_MESSAGES\r\n} from \"./ConversationTypes\";\r\n\r\n\r\nconst UserProvider = (props) => {\r\n\r\n    const [state, dispatch] = useReducer(ConversationReducer, initialState);\r\n\r\n    const getConversations = (userId) => {\r\n        dispatch({type: CONVERSATIONS_LOADING})\r\n        axios.get(`/conversation/${userId}`,)\r\n            .then((res) => {\r\n                dispatch({\r\n                    type: SET_CONVERSATIONS,\r\n                    payload: res.data\r\n                })\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors', err)\r\n            })\r\n    }\r\n\r\n    const addConversation = (conversationData, history) => {\r\n        axios.post(`/conversation/`, conversationData)\r\n            .then((res) => {\r\n                dispatch({\r\n                    type: ADD_CONVERSATION,\r\n                    payload: res.data\r\n                })\r\n                history.push(`/user/${conversationData.receiver}`)\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors', err)\r\n            })\r\n    }\r\n    const getOneConversation = (conversationData) => {\r\n        dispatch({type: CONVERSATION_LOADING})\r\n        axios.get(`/conversation/find/${conversationData.sender}/${conversationData.receiver}`)\r\n            .then((res) => {\r\n                dispatch({\r\n                    type: SET_CONVERSATION,\r\n                    payload: res.data\r\n                })\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors', err)\r\n            })\r\n    }\r\n\r\n\r\n    const getMessages = (conversationId) => {\r\n        dispatch({type: MESSAGES_LOADING})\r\n        axios.get(`/message/${conversationId}`,)\r\n            .then((res) => {\r\n                dispatch({\r\n                    type: SET_MESSAGES,\r\n                    payload: res.data\r\n                })\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors', err)\r\n            })\r\n    }\r\n\r\n    const addMessage = (messageData) => {\r\n        axios.post(`/message/`, messageData)\r\n            .then((res) => {\r\n                dispatch({\r\n                    type: ADD_MESSAGE,\r\n                    payload: res.data\r\n                })\r\n            })\r\n            .catch(err => {\r\n                console.log('Errors', err)\r\n            })\r\n    }\r\n\r\n    const setEmptyConvMess = () => {\r\n        dispatch({type: SET_EMPTY_CONV_MESS})\r\n    }\r\n\r\n    return (\r\n        <ConversationContext.Provider value={{\r\n            loadingConversation: state.loadingConversation,\r\n            oneConversationLoading: state.oneConversationLoading,\r\n            messageLoading: state.messageLoading,\r\n            conversations: state.conversations,\r\n            conversation: state.conversation,\r\n            messages: state.messages,\r\n            members: state.members,\r\n            getConversations,\r\n            addConversation,\r\n            getOneConversation,\r\n            getMessages,\r\n            addMessage,\r\n            setEmptyConvMess\r\n        }}>\r\n            {props.children}\r\n        </ConversationContext.Provider>\r\n    )\r\n}\r\n\r\nexport default UserProvider","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport './index.css'\r\nimport UserProvider from \"./context/User/UserProvider\";\r\nimport ConversationProvider from \"./context/Conversation/ConversationProvider\";\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <UserProvider>\r\n            <ConversationProvider>\r\n                <App/>\r\n            </ConversationProvider>\r\n        </UserProvider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"forgotPassword_container__3-zC3\",\"form\":\"forgotPassword_form__1Lc_l\",\"formWrapper\":\"forgotPassword_formWrapper__mofdd\",\"title\":\"forgotPassword_title__31Bqn\",\"field\":\"forgotPassword_field__1vRz_\",\"label\":\"forgotPassword_label__3eKyO\",\"input\":\"forgotPassword_input__1RWtR\",\"border\":\"forgotPassword_border__246-j\",\"submit\":\"forgotPassword_submit__1UaIq\",\"link\":\"forgotPassword_link__XAc8j\",\"linkText\":\"forgotPassword_linkText__2WGZ7\",\"errors\":\"forgotPassword_errors__3i9qu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatWrapper\":\"chat_chatWrapper__1RrkO\",\"chatHeader\":\"chat_chatHeader__3NHRf\",\"chatTitle\":\"chat_chatTitle__2X61D\",\"chatBox\":\"chat_chatBox__3HR1M\",\"chat\":\"chat_chat__21uMP\",\"outgoing\":\"chat_outgoing__VwGHl\",\"chatDetails\":\"chat_chatDetails__1FGy9\",\"incoming\":\"chat_incoming__ahPzm\",\"chatForm\":\"chat_chatForm__19vND\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"register_container__eVdJh\",\"form\":\"register_form__tuvRj\",\"formWrapper\":\"register_formWrapper__2f8Mn\",\"title\":\"register_title__2NKcd\",\"field\":\"register_field__YdQzG\",\"fieldPass\":\"register_fieldPass__24JJb\",\"fieldPassItem\":\"register_fieldPassItem__J-JQQ\",\"label\":\"register_label__lpk3j\",\"input\":\"register_input__38IBZ\",\"border\":\"register_border__3gCRx\",\"submit\":\"register_submit__1UQpm\",\"link\":\"register_link__39L9U\",\"linkText\":\"register_linkText__38OK_\",\"registerImage\":\"register_registerImage__kHEUU\",\"registerImageLabel\":\"register_registerImageLabel__17iiK\",\"errors\":\"register_errors__2PBGx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"home_wrapper__1JsC3\",\"header\":\"home_header__OyjrH\",\"usersList\":\"home_usersList__2-1FR\",\"content\":\"home_content__k9-gc\",\"contentImg\":\"home_contentImg__2DHL7\",\"details\":\"home_details__11LEy\",\"logout\":\"home_logout__3pYNT\",\"search\":\"home_search__UuaeU\",\"faSearch\":\"home_faSearch__GjRzl\",\"userListLink\":\"home_userListLink__1-vH8\",\"borderLine\":\"home_borderLine__3c0y7\",\"userListContent\":\"home_userListContent__2JkVi\",\"userListContentImg\":\"home_userListContentImg__10CVm\",\"userListDetails\":\"home_userListDetails__1gksb\",\"userListDetailsFirstChild\":\"home_userListDetailsFirstChild__1zJxZ\",\"userListDetailsLastChild\":\"home_userListDetailsLastChild__2Cghd\",\"faOnline\":\"home_faOnline__1u4-e\",\"faOffline\":\"home_faOffline__3TNeO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__3EB1h\",\"form\":\"login_form__oRxVW\",\"formWrapper\":\"login_formWrapper__39UY_\",\"title\":\"login_title__3mCDu\",\"field\":\"login_field__2P86z\",\"fieldPass\":\"login_fieldPass__1xV8y\",\"fieldPassItem\":\"login_fieldPassItem__39PRN\",\"label\":\"login_label__2jDfq\",\"input\":\"login_input__1Bxrc\",\"border\":\"login_border__h2zN6\",\"submit\":\"login_submit__2inWQ\",\"link\":\"login_link__2X81W\",\"linkText\":\"login_linkText__18TNy\",\"errors\":\"login_errors__1o6Ri\",\"googleButton\":\"login_googleButton__1lYOs\",\"linkForgot\":\"login_linkForgot__1Iu_K\",\"linkTextForgot\":\"login_linkTextForgot__1zaT3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"resetPassword_container__3-3zw\",\"form\":\"resetPassword_form__2GAVc\",\"formWrapper\":\"resetPassword_formWrapper__2yNr8\",\"title\":\"resetPassword_title__2vph0\",\"field\":\"resetPassword_field__30QZy\",\"fieldPass\":\"resetPassword_fieldPass__2-Ycf\",\"fieldPassItem\":\"resetPassword_fieldPassItem__17JuB\",\"label\":\"resetPassword_label__2ZRB7\",\"input\":\"resetPassword_input__3RE0R\",\"border\":\"resetPassword_border__1BqCD\",\"submit\":\"resetPassword_submit__vAyx3\",\"link\":\"resetPassword_link__3c56G\",\"linkText\":\"resetPassword_linkText__17jvJ\",\"errors\":\"resetPassword_errors__1yasx\",\"submitLink\":\"resetPassword_submitLink__2vPzO\"};"],"sourceRoot":""}